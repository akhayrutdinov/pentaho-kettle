<project name="pit-kettle-core">

  <property name="classOutputDir" value="bin"/>

  <!-- classpath for pitest and any plugins -->
  <path id="pitest.path">
    <!-- must currently include the test library on the tool classpath. this will be fixed in a future version-->
    <pathelement location="test-lib/junit-4.7.jar"/>
    <pathelement location="pitest-lib/pitest-1.1.5.jar"/>
    <pathelement location="pitest-lib/pitest-ant-1.1.5.jar"/>
  </path>

  <taskdef name="pitest" classname="org.pitest.ant.PitestTask" classpathref="pitest.path"/>

  <path id="test.path">
    <pathelement location="${classOutputDir}/classes"/>
    <pathelement location="${classOutputDir}/test/classes"/>
    <fileset dir="lib">
      <include name="**/*.jar"/>
    </fileset>
    <fileset dir="test-lib">
      <include name="**/*.jar"/>
    </fileset>
  </path>

  <target name="pit">
    <path id="mutation.path">
      <path refid="pitest.path"/>
      <path refid="test.path"/>
    </path>

    <pitest
        pitClasspath="pitest.path"
        threads="4"
        classPath="mutation.path"
        targetTests="org.pentaho.di.*"
        targetClasses="org.pentaho.di.*"
        reportDir="pitest/reports"
        sourceDir="src"
        excludedClasses="*.CertificateGenEncryptUtilTest,*.SimpleTimestampFormatTest"
        historyInputLocation="pitest/pit"
        historyOutputLocation="pitest/pit"
        mutators="DEFAULTS"/>
  </target>

</project>
